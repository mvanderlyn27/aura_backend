# API Endpoint Documentation

This document outlines the available endpoints for the Fastify API, including details on authentication, request parameters, and responses. This information can be used to integrate a frontend application or for consumption by other services/LLMs.

---

## AI Endpoints

Base Path: `/api/ai`

### Generate Text

*   **Endpoint:** `POST /api/ai/generate`
*   **Description:** Generates text based on a provided prompt using the configured Gemini model (e.g., "gemini-pro"). Requires user authentication.
*   **Authentication:** Required (Valid Supabase JWT)
*   **Headers:**
    *   `Authorization: Bearer <supabase-jwt>` (Replace `<supabase-jwt>` with the actual token)
*   **Request Body:**
    *   Content-Type: `application/json`
    *   Schema:
        ```json
        {
          "type": "object",
          "required": ["prompt"],
          "properties": {
            "prompt": {
              "type": "string",
              "description": "The text prompt to send to the Gemini model.",
              "minLength": 1
            }
          }
        }
        ```
    *   Example:
        ```json
        {
          "prompt": "Write a short story about a robot learning to paint."
        }
        ```
*   **Success Response (200 OK):**
    *   Content-Type: `application/json`
    *   Schema:
        ```json
        {
          "type": "object",
          "properties": {
            "result": {
              "type": "string",
              "description": "The text generated by the Gemini model."
            }
          }
        }
        ```
    *   Example:
        ```json
        {
          "result": "Once upon a time, in a lab filled with whirring gears..."
        }
        ```
*   **Error Responses:**
    *   **400 Bad Request:** Sent if the request body is invalid (e.g., missing `prompt`).
        ```json
        {
          "error": "Bad Request",
          "message": "body must have required property 'prompt'"
        }
        ```
    *   **401 Unauthorized:** Sent if the `Authorization` header is missing, malformed, or contains an invalid/expired Supabase JWT.
        ```json
        {
          "error": "Unauthorized",
          "message": "Missing or invalid Authorization header"
        }
        ```
        ```json
        {
          "error": "Unauthorized",
          "message": "Invalid token or user not found"
        }
        ```
    *   **500 Internal Server Error:** Sent if there's an issue communicating with the Gemini API or an unexpected server error occurs during processing.
        ```json
        {
          "error": "Internal Server Error",
          "message": "Failed to generate text due to an API issue."
        }
        ```
        ```json
        {
          "error": "Internal Server Error",
          "message": "An unexpected error occurred."
        }
        ```

---

*(Add documentation for other endpoints here as they are created)*
